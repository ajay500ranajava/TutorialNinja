pipeline {
   agent any
   tools {
       // Use the Maven version configured in Jenkins
       maven 'Maven3'
       jdk 'jdk17'  // Use the JDK version configured in Jenkins
   }
   environment {
       MVN_HOME = tool 'Maven'
       JAVA_HOME = tool 'Eclipse Temurin'
       PATH = "${JAVA_HOME}/bin:${PATH}"
   }
   stages {
       stage('Clone Repository') {
           steps {
               git url: 'https://github.com/ajay500ranajava/TutorialNinja.git', branch: 'main'
           }
       }
       stage('Build') {
           steps {
               script {
                   sh "${MVN_HOME}/bin/mvn clean compile"
               }
           }
       }
       stage('Run Tests') {
           steps {
               script {
                   sh "${MVN_HOME}/bin/mvn test"
               }
           }
       }
       stage('Publish Test Results') {
           steps {
               junit '**TutorialNinjaProj/target/surefire-reports/*.xml'
           }
       }
   }
   post {
       always {
           archiveArtifacts artifacts: '**/target/*.jar', allowEmptyArchive: true
           junit '**TutorialNinjaProj/target/surefire-reports/*.xml'
       }
   }
}